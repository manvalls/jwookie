(function(k){function r(){var a;if(!w)if(A.length){var d=A.shift();w=!0;wit.apply(d[0],d[1])(function(){w=!1;r();d[2]()})}else if(n.length){var b=n;n=[];for(a=0;a<b.length;a++)b[a]();return r()}}function C(a,d){return function(b){A.push([a,d,b||function(){}]);r()}}function x(a){a=a||{};var d=a.url||location.href;d=d.replace(/#.*$/,"");d=D(d);var b=a.method||"GET";var g=a.headers||{};var c=a.body||null;var e=a.uploadHandler||function(){};var h=a.asynchronous||!1;var l=a.refresh||!1;var p=a.key||{};return function(a){n.push(function(){function r(a){a=a.c;setTimeout(a.onerror,0,Error("Aborted"));a.onload=a.onerror=null;a.abort()}function q(a){a=u.indexOf(a);-1!=a&&u.splice(a,1)}var f,n;a=a||function(){};if(h){var v=u;for(f=0;f<v.length;f++){var t=v[f];if(!t.b){setTimeout(a,0,Error("Aborted"));return}t.key===p&&(q(t),r(t))}}else for(v=u,u=[],f=0;f<v.length;f++)r(v[f]);var m=new XMLHttpRequest;t={c:m,b:h,key:p};u.push(t);e(m.upload);m.onload=function(){q(t);try{var b=JSON.parse(m.responseText)}catch(J){return a(J)}var c=m.responseURL||m.getResponseHeader("X-Response-Url")||d;c=D(c);!h&&k.history&&history.pushState&&history.replaceState&&c!=location.href&&(l?history.replaceState({__wookie:!0},"",c):history.pushState({__wookie:!0},"",c));C(b,void 0)(a)};m.onerror=function(b){q(t);a(b)};m.open(b,d,!0);m.setRequestHeader("Accept","application/json");h&&m.setRequestHeader("X-Async","true");if(k.wok)for(f in wok)if(wok.hasOwnProperty(f))for(n in wok[f])wok[f].hasOwnProperty(n)&&m.setRequestHeader(n,wok[f][n]);for(f in g)g.hasOwnProperty(f)&&m.setRequestHeader(f,g[f]);m.send(c)});r()}}function B(a,d,b,g){var c;for(c=0;c<a.attributes.length;c++){var e=a.attributes[c];var h=e.name.indexOf(d);var l=e.name.indexOf(b);0==h&&l==e.name.length-b.length&&(g[e.name.slice(h+d.length,l)]=e.value)}}function E(a,d,b,g){var c;if(a)var e=[];else if(d||b)var h=new FormData;else return new FormData(g);for(c=0;c<g.elements.length;c++){var l=g.elements[c];if(l.hasAttribute("name"))switch(l.type.toLowerCase()){case "radio":case "checkbox":if(!l.checked)break;default:d&&-1==d.indexOf(l.name)||b&&-1!=b.indexOf(l.name)||(a?e.push(encodeURIComponent(l.name)+(l.value?"="+encodeURIComponent(l.value):"")):h.append(l.name,l.value))}}return a?a.replace(/\?.*$/,"")+"?"+e.join("&"):h}function F(a){var d={};this.target&&"_self"!=this.target||(a.preventDefault(),B(this,"data-","-header",d),y.trigger(this),x({url:this.href,headers:d,asynchronous:null!=this.getAttribute("data-async")})(function(a){z.trigger(this,a)}))}function G(a){var d={},b=this.__wookie_lastClickedSubmit;if(!(this.target&&"_self"!=this.target||b&&b.formTarget&&"_self"!=b.formTarget)){B(this,"data-","-header",d);b&&B(b,"data-","-header",d);var g=b&&b.formMethod||this.method||"GET";var c=b&&b.formAction||this.action||location.href;c=c.replace(/#.*$/,"");if("get"==g.toLowerCase()){var e=null;c=E(c,null,null,this)}else{if(!k.FormData)return;if(b&&b.a){var h=this.encoding;this.encoding=b.a}e=E(null,null,null,this);b&&b.a&&(this.encoding=h)}a.preventDefault();y.trigger(this);x({url:c,headers:d,method:g,body:e,asynchronous:null!=this.getAttribute("data-async")||b&&null!=b.getAttribute("data-async")})(function(a){z.trigger(this,a)})}}function H(){this.form&&(this.form.__wookie_lastClickedSubmit=this)}function I(a){var d=a.querySelectorAll("form[data-wk]"),b=a.querySelectorAll("input[type=submit], button[type=submit], input[type=image]"),g=a.querySelectorAll("[data-wkrun]");a=a.querySelectorAll("a[data-wk]");var c;for(c=0;c<a.length;c++){var e=a[c];e.addEventListener?e.addEventListener("click",F,!1):e.attachEvent&&e.attachEvent("onclick",F)}for(a=0;a<d.length;a++)c=d[a],c.addEventListener?c.addEventListener("submit",G,!1):c.attachEvent&&c.attachEvent("onsubmit",G);debugger;for(d=0;d<b.length;d++)a=b[d],a.addEventListener?a.addEventListener("click",H,!1):a.attachEvent&&a.attachEvent("onclick",H);for(b=0;b<g.length;b++)if(c=g[b].getAttribute("data-run").split("?"),c[0]){d=c[0].split(".");a={};if(c[1])for(e=c[1].split("&"),c=0;c<e.length;c++){var h=e[c].split("=");h[0]&&(a[decodeURIComponent(h[0])]=decodeURIComponent(h[1]||""))}wit.call(d,a,g[b])}}function p(){k.removeEventListener?(k.removeEventListener("load",p,!1),document.removeEventListener("DOMContentLoaded",p,!1)):k.detachEvent&&k.detachEvent("onload",p);wit.beforeMount.subscribe(I);I(document);w=!1;r()}var q=k.wookie=k.wookie||{},A=[],n=[],w=!0,y=wit.event(),z=wit.event(),u=[],D=function(){var a;return function(d){a||(a=document.createElement("a"));a.href=d;return a.href}}();k.addEventListener&&k.addEventListener("popstate",function(){history.state&&history.state.__wookie&&(y.trigger(document.documentElement,"popstate"),x({refresh:!0})(function(a){z.trigger(document.documentElement,a,"popstate")}))},!1);q.apply=C;q.request=x;q.queue=function(a){n.push(function(){setTimeout(a,0)});r()};q.loading=y;q.loaded=z;setTimeout(function(){"complete"==document.readyState?p():k.addEventListener?(k.addEventListener("load",p,!1),document.addEventListener("DOMContentLoaded",p,!1)):k.attachEvent&&k.attachEvent("onload",p)},0);"undefined"!=typeof module&&(module.exports=q)})("undefined"==typeof window?self:window);
